# sql执行顺序

FROM：获取第一张表，称为原表table1，获取第二张表，称为原表table2，将两张表做笛卡尔积，生成第一张中间表Temp1。

ON：根据筛选条件，在Temp1上筛选符合条件的记录，生成中间表Temp2。

JOIN：根据连接方式的不同，选择是否在Temp2的基础上添加外部行。左外就把左表在Temp2中筛选掉的表添加回来生成Temp3，右外则是右表。

WHERE：筛选表中的记录，对中间表temp3的记录进行过滤，生成temp4。

GROUP BY：根据聚合键对表进行分组，即在temp4的基础上做分组，生成temp5。

WITH：应用cube或rollup生成超组，在Temp5的基础上添加超组，生成Temp6。

HAVING：对组进行筛选，生成temp7。

SELECT：选取字段，对temp7进行字段的选取，生成temp8。

DISTINCT：对字段进行去重，对temp8进行去重，生成temp9。

ORDER BY：按照排序键对表进行排序，对temp9中的表进行排序，生成temp10。

LIMIT（TOP）：对表进行分页，对temp10进行分页，生成temp11。

# 表连接的几种方式

内连接（inner join)

外连接（left join, right join, full join)

交叉连接 (cross join)：叉连接(笛卡尔积)返回被连接的两个表所有数据行的笛卡尔积，返回结果集合中的数据行数等于第一个表中符合查询条件的数据行数乘以第二个表中符合查询条件的数据行数。

UNION / UNION ALL

# 去重的几种方式

distinct 通常效率较低。它不适合用来展示去重后具体的值，一般与 count 配合用来计算条数。

group by

row_number 是窗口函数，语法如下：
row_number() over (partition by <用于分组的字段名> order by <用于组内排序的字段名>)

# 窗口函数

主要有专用窗口函数（rank, dense_rank, row_number这些）,聚合函数（sum avg这些）

区别：

rank排序相同时会重复，总数不变，即会出现1、1、3这样的排序结果；

dense_rank()排序相同时会重复，总数会减少，即会出现1、1、2这样的排序结果；

row_number()排序相同时不会重复，会根据顺序排序。

# 新上线一个活动，如何评价活动效果？

 A/B测试，同比/环比与内/外部竞品分析，与业务目标对比，
 
 设置准确科学的结果指标和过程指标。比如活动的目标是提升收入，那么指标就设置成收入、购买人数、复购率等；若活动的目标是提升用户活跃，则指标就可以设置成用户在线时长、用户登录次数等

纵向对比法：通过对比活动前和活动后结果指标的变化，判断运营活动是有效果。

横向对比法：通过实验组和对照组的设置和对比，判断运营活动是否有效果。

综合对比法：同时结合横向对比和纵向对比，判断运营活动是否有效果。这种方法也叫DID方法，是Difference in Difference的缩写，这种方法既考虑到了纵向对比的差异，又考虑到了横向对比的差异，所以叫DID方法，也是比横向对比更为严谨的一种方法。

目标对比法：和活动刚开始设定的目标对比，判断运营活动的效果是否达到了预期。

活动与活动对比法：利用相似活动的横向对比，判断运营活动的效果，其实也是一种横向对比的方法。

# 【字节】针对特定人群，上了某个策略以提高策略的转化率，怎么衡量指标上涨是否显著？

# 大数定律

大数定理简单来说，指得是某个随机事件在单次试验中可能发生也可能不发生，但在大量重复实验中往往呈现出明显的规律性，即该随机事件发生的频率会向某个常数值收敛，该常数值即为该事件发生的概率。

大数定律告诉我们能用频率近似代替概率；能用样本均值近似代替总体均值。
